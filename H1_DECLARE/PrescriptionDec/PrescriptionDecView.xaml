<UserControl
    x:Class="His_Pos.PrescriptionDec.PrescriptionDecView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:my="clr-namespace:His_Pos"
    xmlns:prescriptionDec="clr-namespace:His_Pos.PrescriptionDec"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    d:DesignHeight="839"
    d:DesignWidth="1365"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Style x:Key="CenterGridHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="Margin" Value="5,10,5,10" />
        </Style>
        <Style x:Key="CenterGridHeaderStyle2" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Background" Value="#99BFBFBF" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="Margin" Value="5,10,5,10" />
        </Style>
        <DataTemplate x:Key="MedcineCodeAutoComplete">
            <StackPanel Orientation="Horizontal">
                <Label
                    x:Name="Promid"
                    Width="100"
                    Content="{Binding Id}" />
                <Label
                    x:Name="PromName"
                    Width="350"
                    Content="{Binding Name}" />
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>
    <Viewbox Stretch="Fill">
        <Grid Width="1365" Height="839">
            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="160" />
                <RowDefinition />
                <RowDefinition Height="300" />
            </Grid.RowDefinitions>
            <StackPanel
                Grid.Row="0"
                Margin="9"
                Orientation="Horizontal">
                <Image
                    Name="IcPatientGender"
                    Width="25"
                    Margin="20,0,15,0" />
                <ComboBox
                    Name="PatientGender"
                    Width="50"
                    Margin="0,0,15,0"
                    HorizontalContentAlignment="Center"
                    FontFamily="Segoe UI Semi"
                    FontSize="18"
                    SelectionChanged="PatientGender_SelectionChanged">
                    <ListBoxItem Content="男" />
                    <ListBoxItem Content="女" />
                </ComboBox>
                <TextBox
                    Name="PatientName"
                    Width="150"
                    Margin="0,0,30,0"
                    VerticalContentAlignment="Center"
                    FontSize="18" />
                <Image Name="IcPatientId" Width="30" />
                <TextBox
                    Name="PatientId"
                    Width="150"
                    Margin="5,0,20,0"
                    FontSize="18"
                    Foreground="{StaticResource ForeGround}" />
                <Image Name="IcPatientBirthday" Width="30" />
                <TextBox
                    Name="PatientBirthday"
                    Width="150"
                    Margin="5,0,20,0"
                    FontSize="18"
                    Foreground="{StaticResource ForeGround}" />
                <Label
                    VerticalAlignment="Center"
                    Content="藥品毛利 : "
                    FontFamily="Segoe UI Semibold"
                    FontSize="18"
                    Foreground="{StaticResource ForeGround}" />
                <Label
                    x:Name="PrescriptionProfit"
                    Margin="0,0,0,0"
                    VerticalAlignment="Center"
                    FontSize="16"
                    Foreground="#FF424040" />
                <Rectangle Width="380" />
                <Button
                    MinWidth="130"
                    Background="DeepSkyBlue"
                    BorderThickness="0"
                    Click="GetPatientDataButtonClick"
                    Content="取得病患資料"
                    FontFamily="Segoe UI Semibold"
                    FontSize="16" />
            </StackPanel>
            <Grid
                Grid.Row="1"
                Margin="10,0,10,10"
                Background="{StaticResource GridBackGround}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <StackPanel
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        VerticalAlignment="Center"
                        Content="釋出院所"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <controls:AutoCompleteBox
                        x:Name="ReleaseInstitution"
                        Width="100"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Stretch"
                        Background="Transparent"
                        BorderBrush="DimGray"
                        BorderThickness="0,0,0,1"
                        DropDownClosed="ReleaseInstitution_DropDownClosed"
                        FontFamily="Segoe UI Semibold"
                        FontSize="16"
                        FontStretch="ExtraExpanded"
                        ItemContainerStyle="{StaticResource AutoCompleteBoxItemContainerStyle}"
                        MinimumPrefixLength="4"
                        SelectedItem="{Binding Path=Prescription.Treatment.MedicalInfo.Hospital, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        ValueMemberPath="Id">
                        <controls:AutoCompleteBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Label Width="120" Content="{Binding Id}" />
                                    <Label Width="350" Content="{Binding Name}" />
                                </StackPanel>
                            </DataTemplate>
                        </controls:AutoCompleteBox.ItemTemplate>
                    </controls:AutoCompleteBox>
                    <Label
                        VerticalAlignment="Center"
                        Content="{Binding Prescription.Treatment.MedicalInfo.Hospital.Name, UpdateSourceTrigger=PropertyChanged}"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="0"
                    Grid.Column="2"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="就醫科別"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <ComboBox
                        x:Name="DivisionCombo"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        DropDownClosed="Combo_DropDownClosed"
                        DropDownOpened="Combo_DropDownOpened"
                        FontFamily="Segoe UI Semi"
                        FontSize="14"
                        IsEditable="True" />
                </StackPanel>
                <StackPanel
                    Grid.Row="0"
                    Grid.Column="3"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="診治醫生"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="DoctorId"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="0"
                    Grid.Column="4"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="就醫序號"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="MedicalNumber"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="處方案件"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <ComboBox
                        x:Name="TreatmentCaseCombo"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        DropDownClosed="Combo_DropDownClosed"
                        DropDownOpened="Combo_DropDownOpened"
                        FontFamily="Segoe UI Semi"
                        FontSize="14"
                        IsEditable="True">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <Label Content="{Binding}" />
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="就醫日期"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <DatePicker
                        x:Name="TreatmentDate"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="2"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="調劑日期"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <DatePicker
                        x:Name="AdjustDate"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="3"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="主要診斷"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="MainDiagnosis"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="4"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Width="auto"
                        Content="次要診斷"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="SeconDiagnosis"
                        Width="170"
                        FontFamily="Segoe UI Semi"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="0"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="給付類別"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <ComboBox
                        x:Name="PaymentCategoryCombo"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        DropDownClosed="Combo_DropDownClosed"
                        DropDownOpened="Combo_DropDownOpened"
                        FontFamily="Segoe UI Semi"
                        FontSize="14"
                        IsEditable="True" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="1"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="部分負擔"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <ComboBox
                        x:Name="CopaymentCombo"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        DropDownClosed="Combo_DropDownClosed"
                        DropDownOpened="Combo_DropDownOpened"
                        FontFamily="Segoe UI Semi"
                        FontSize="14"
                        IsEditable="True" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="2"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="調劑案件"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <ComboBox
                        x:Name="AdjustCaseCombo"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        DropDownClosed="Combo_DropDownClosed"
                        DropDownOpened="Combo_DropDownOpened"
                        FontFamily="Segoe UI Semi"
                        FontSize="14"
                        IsEditable="True" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="3"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="領藥次數"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="ChronicSequence"
                        Width="72"
                        HorizontalContentAlignment="Center"
                        FontSize="14" />
                    <Label
                        Content=" / "
                        FontFamily="Segoe UI Semibold"
                        FontSize="16" />
                    <TextBox
                        x:Name="ChronicTotal"
                        Width="72"
                        HorizontalContentAlignment="Center"
                        FontSize="14" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="4"
                    Margin="8"
                    Orientation="Horizontal">
                    <Label
                        Content="特定治療"
                        FontFamily="Segoe UI Semibold"
                        FontSize="18"
                        Foreground="{StaticResource ForeGround}" />
                    <TextBox
                        x:Name="SpecialCode"
                        Width="170"
                        HorizontalContentAlignment="Center"
                        FontSize="14" />
                </StackPanel>
            </Grid>
            <DataGrid
                x:Name="PrescriptionMedicines"
                Grid.Row="2"
                Margin="10,0,10,10"
                AutoGenerateColumns="False"
                Background="{StaticResource GridBackGround}"
                CanUserAddRows="True"
                CanUserResizeRows="False"
                CellStyle="{StaticResource DataGridCellStyle}"
                ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}">
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Style.Triggers>
                            <Trigger Property="DataGridRow.IsSelected" Value="True">
                                <Setter Property="Background" Value="{StaticResource GridSelected}" />
                            </Trigger>
                        </Style.Triggers>
                        <EventSetter Event="MouseEnter" Handler="DataGridRow_MouseEnter" />
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="FontSize" Value="14" />
                        <Setter Property="Height" Value="40" />
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridTemplateColumn
                        x:Name="MedicineCode"
                        Width="130"
                        Header="健保代碼">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="MedicineCodeDataTemplate">
                                <controls:AutoCompleteBox
                                    x:Name="MedicineCodeAuto"
                                    Width="130"
                                    Height="30"
                                    MaxHeight="50"
                                    VerticalContentAlignment="Stretch"
                                    Background="Transparent"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    DropDownClosing="MedicineCodeAuto_DropDownClosing"
                                    FilterMode="Contains"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    IsTextCompletionEnabled="False"
                                    ItemContainerStyle="{StaticResource AutoCompleteBoxItemContainerStyle}"
                                    ItemTemplate="{StaticResource MedcineCodeAutoComplete}"
                                    MinimumPrefixLength="2"
                                    Populating="MedicineCodeAuto_Populating"
                                    Text="{Binding Id}"
                                    ValueMemberPath="Id" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn
                        MinWidth="400"
                        Binding="{Binding Name}"
                        FontFamily="Segoe UI Semibold"
                        FontSize="14"
                        FontWeight="Bold"
                        Header="藥品名稱"
                        IsReadOnly="True" />
                    <DataGridTemplateColumn MinWidth="60" Header="用量">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="DosageDataTemplate">
                                <TextBox
                                    x:Name="Dosage"
                                    MinWidth="60"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    TextChanged="Dosage_TextChanged" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn MinWidth="40" Header="用法">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="UsageDataTemplate">
                                <TextBox
                                    x:Name="Usage"
                                    MinWidth="40"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    TextChanged="Usage_TextChanged" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn MinWidth="40" Header="天數">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="MedicineDaysDataTemplate">
                                <TextBox
                                    x:Name="MedicineDays"
                                    MinWidth="40"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    TextChanged="MedicineDays_TextChanged" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn MinWidth="40" Header="總數">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="MedicineAmountDataTemplate">
                                <TextBox
                                    x:Name="MedicineTotal"
                                    MinWidth="40"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    TextChanged="MedicineTotal_TextChanged" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn MinWidth="40" Header="自費">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="PaysDataTemplate">
                                <CheckBox
                                    x:Name="PaySelf"
                                    HorizontalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    Checked="PaySelf_CheckedEvent"
                                    Unchecked="PaySelf_CheckedEvent" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn MinWidth="40" Header="途徑">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="PositionDataTemplate">
                                <controls:AutoCompleteBox
                                    x:Name="PositionAuto"
                                    Height="30"
                                    MinWidth="40"
                                    MaxHeight="50"
                                    VerticalContentAlignment="Stretch"
                                    Background="Transparent"
                                    BorderBrush="DimGray"
                                    BorderThickness="0,0,0,1"
                                    FontFamily="Segoe UI Semibold"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    TextChanged="PositionAuto_TextChanged">
                                    <controls:AutoCompleteBox.ItemContainerStyle>
                                        <Style TargetType="{x:Type ListBoxItem}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                        <Border
                                                            x:Name="ContentBorder"
                                                            Padding="4"
                                                            Background="GhostWhite">
                                                            <ContentPresenter />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ContentBorder" Property="Background" Value="#FFB8BEC3" />
                                                                <Setter Property="IsSelected" Value="True" />
                                                            </Trigger>
                                                            <Trigger Property="IsSelected" Value="True">
                                                                <Setter TargetName="ContentBorder" Property="Background" Value="#FFB8BEC3" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </controls:AutoCompleteBox.ItemContainerStyle>
                                </controls:AutoCompleteBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn
                        MinWidth="60"
                        Binding="{Binding HcPrice}"
                        FontFamily="Segoe UI Semibold"
                        FontSize="14"
                        FontWeight="Bold"
                        Header="健保價格">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn
                        MinWidth="60"
                        Binding="{Binding Price}"
                        FontFamily="Segoe UI Semibold"
                        FontSize="14"
                        FontWeight="Bold"
                        Header="自費價格">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
            <Grid Grid.Row="3" Margin="10,0,10,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="350" />
                    <ColumnDefinition Width="650" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0" Background="{StaticResource GridBackGround}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <StackPanel
                        Grid.Row="0"
                        Background="{StaticResource GridBackGround}"
                        Orientation="Horizontal">
                        <RadioButton
                            Margin="20,0,5,0"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Checked="RadioButton_Checked"
                            Content="交易"
                            FontFamily="Segoe UI Semibold"
                            FontSize="16"
                            Tag="1" />
                        <Image Width="18" Source="/Images/PosDot.png" />
                        <RadioButton
                            Margin="20,0,5,0"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Checked="RadioButton_Checked"
                            Content="調劑"
                            FontFamily="Segoe UI Semibold"
                            FontSize="16"
                            Tag="0" />
                        <Image Width="18" Source="/Images/HisDot.png" />
                        <RadioButton
                            Margin="20,0,5,0"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Checked="RadioButton_Checked"
                            Content="全部顯示"
                            FontFamily="Segoe UI Semibold"
                            FontSize="16"
                            IsChecked="True"
                            Tag="2" />
                        <Image
                            Width="27"
                            Margin="0,0,15,0"
                            Source="/Images/PosHisDot.png" />
                    </StackPanel>
                    <DataGrid
                        x:Name="CusHistoryMaster"
                        Grid.Row="1"
                        AutoGenerateColumns="False"
                        Background="Transparent"
                        CellStyle="{StaticResource DataGridCellStyle}"
                        ColumnHeaderStyle="{DynamicResource CenterGridHeaderStyle}"
                        HeadersVisibility="None"
                        HorizontalScrollBarVisibility="Hidden"
                        ItemsSource="{Binding customerHistoryList}"
                        MouseEnter="Prescription_MouseEnter"
                        SelectionChanged="Prescription_SelectionChanged">
                        <DataGrid.RowStyle>
                            <Style TargetType="{x:Type DataGridRow}">
                                <Style.Triggers>
                                    <Trigger Property="DataGridRow.IsSelected" Value="True">
                                        <Setter Property="Background" Value="LightGray" />
                                    </Trigger>
                                </Style.Triggers>
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="BorderBrush" Value="Transparent" />
                                <Setter Property="FontSize" Value="14" />
                                <Setter Property="Height" Value="35" />
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Width="Auto" MinWidth="15">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:Name="CustomHistoriesTypeIcon">
                                        <Image
                                            Width="15"
                                            Height="15"
                                            Source="{Binding TypeIcon}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn
                                MinWidth="90"
                                Binding="{Binding Date}"
                                Header="date"
                                IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="HorizontalAlignment" Value="Center" />
                                        <Setter Property="VerticalAlignment" Value="Center" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn
                                Width="220"
                                Binding="{Binding CustomerHistoryData}"
                                Header="title"
                                IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="HorizontalAlignment" Value="Left" />
                                        <Setter Property="VerticalAlignment" Value="Center" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
                <DataGrid
                    x:Name="CusHistoryDetail"
                    Grid.Column="1"
                    Margin="0,0,10,0"
                    AutoGenerateColumns="False"
                    Background="{StaticResource GridDarkerBackGround}"
                    CanUserAddRows="False"
                    ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}"
                    VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Width="250" Binding="{Binding CustomerHistoryDetailCol0}" />
                        <DataGridTextColumn MinWidth="90" Binding="{Binding CustomerHistoryDetailCol1}" />
                        <DataGridTextColumn MinWidth="90" Binding="{Binding CustomerHistoryDetailCol2}" />
                        <DataGridTextColumn MinWidth="70" Binding="{Binding CustomerHistoryDetailCol3}" />
                    </DataGrid.Columns>
                </DataGrid>
                <Grid Grid.Column="2" Background="{StaticResource GridBackGround}">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <StackPanel
                        Grid.Row="0"
                        Margin="8"
                        Orientation="Horizontal">
                        <Label
                            Width="100"
                            HorizontalAlignment="Right"
                            Content="押金 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <TextBox
                            Name="Deposit"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}"
                            Text="0"
                            TextChanged="CostTextBox_TextChanged" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="1"
                        Margin="8"
                        Orientation="Horizontal">
                        <Label
                            Width="100"
                            Content="自費 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <TextBox
                            Name="SelfCost"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}"
                            Text="0"
                            TextChanged="CostTextBox_TextChanged" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="2"
                        Margin="8"
                        Orientation="Horizontal">
                        <Label
                            Width="100"
                            Content="部分負擔 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <TextBox
                            Name="Copayment"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}"
                            Text="0"
                            TextChanged="CostTextBox_TextChanged" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="3"
                        Margin="8"
                        Orientation="Horizontal">
                        <Label
                            Width="100"
                            Content="應收金額 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <TextBox
                            Name="TotalPrice"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}"
                            Text="0"
                            TextChanged="CustomPay_TextChanged" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="4"
                        Background="{StaticResource Shadow}"
                        Orientation="Horizontal">
                        <Label
                            Width="60"
                            Margin="10,0,0,0"
                            VerticalAlignment="Center"
                            Content="已付 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <TextBox
                            Name="CustomPay"
                            Width="90"
                            Height="35"
                            HorizontalContentAlignment="Center"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}"
                            Text="0"
                            TextChanged="CustomPay_TextChanged" />
                        <Label
                            Width="60"
                            Margin="20,0,0,0"
                            VerticalAlignment="Center"
                            Content="找零 $"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                        <Label
                            Name="Change"
                            Width="90"
                            Height="35"
                            HorizontalContentAlignment="Center"
                            Content="0"
                            FontFamily="Segoe UI Semibold"
                            FontSize="18"
                            Foreground="{StaticResource ForeGround}" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="5"
                        Margin="8"
                        Orientation="Horizontal">
                        <Button
                            Width="125"
                            Background="{StaticResource Shadow}"
                            BorderThickness="0"
                            Click="Button_Click"
                            Content="清除"
                            FontFamily="Segoe UI Semibold"
                            FontSize="16" />
                        <Button
                            Width="180"
                            Margin="20,0,0,0"
                            Background="Red"
                            BorderThickness="0"
                            Click="DeclareButtonClick"
                            Content="確認"
                            FontFamily="Segoe UI Semibold"
                            FontSize="16" />
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </Viewbox>
</UserControl>